[
  {
    "objectID": "introduction.html",
    "href": "introduction.html",
    "title": "Introduction",
    "section": "",
    "text": "This project is designed to guide you through the process of performing survival analysis using large cohort data. Survival analysis, also known as time-to-event analysis, is a statistical method used to quantify the risk and timing of events, such as death, disease onset, or other significant occurrences. This type of analysis is particularly powerful in medical and epidemiological research, where understanding the duration until an event occurs can provide critical insights into patient outcomes and treatment efficacy.\nIt is structured into a series of sections, which will introduce you to the fundamental concepts, techniques, and applications of survival analysis. The aim is for you to learn how to manage and analyse large data sets, apply appropriate statistical models, interpret results, and draw meaningful conclusions about survival probabilities and hazard functions.\n\n\n\n\n\n\n\nflowchart LR\n  A(Data Curation) --&gt; B(Cox Proportional Regression Model)\n  B --&gt; C(Univariate Analysis)\n  B --&gt; D(Multivariate Analysis)\n  C --&gt; E[Kaplan -Meier Curve]\n  C --&gt; F[Log-Rank Test]\n  D --&gt; G[Hazard Ratio Table]\n  D --&gt; H[Forest Plot]\n  \n  F --&gt; I{Interpretation of results}\n  E --&gt; I\n  G --&gt; I\n  H --&gt; I"
  },
  {
    "objectID": "introduction.html#welcome-to-the-survival-analysis-of-left-truncated-and-right-censored-data-recode-project",
    "href": "introduction.html#welcome-to-the-survival-analysis-of-left-truncated-and-right-censored-data-recode-project",
    "title": "Introduction",
    "section": "",
    "text": "This project is designed to guide you through the process of performing survival analysis using large cohort data. Survival analysis, also known as time-to-event analysis, is a statistical method used to quantify the risk and timing of events, such as death, disease onset, or other significant occurrences. This type of analysis is particularly powerful in medical and epidemiological research, where understanding the duration until an event occurs can provide critical insights into patient outcomes and treatment efficacy.\nIt is structured into a series of sections, which will introduce you to the fundamental concepts, techniques, and applications of survival analysis. The aim is for you to learn how to manage and analyse large data sets, apply appropriate statistical models, interpret results, and draw meaningful conclusions about survival probabilities and hazard functions.\n\n\n\n\n\n\n\nflowchart LR\n  A(Data Curation) --&gt; B(Cox Proportional Regression Model)\n  B --&gt; C(Univariate Analysis)\n  B --&gt; D(Multivariate Analysis)\n  C --&gt; E[Kaplan -Meier Curve]\n  C --&gt; F[Log-Rank Test]\n  D --&gt; G[Hazard Ratio Table]\n  D --&gt; H[Forest Plot]\n  \n  F --&gt; I{Interpretation of results}\n  E --&gt; I\n  G --&gt; I\n  H --&gt; I"
  },
  {
    "objectID": "introduction.html#pre-requisites",
    "href": "introduction.html#pre-requisites",
    "title": "Introduction",
    "section": "Pre-requisites",
    "text": "Pre-requisites\nIt would be very useful to take some courses offered by the Graduate School at Imperial College London, either as an introduction or a refresher:\nResearch Computing & Data Science Skills Courses\n\nData Exploration and Visualisation\nIntroduction to R\nData Processing with R"
  },
  {
    "objectID": "introduction.html#survival-analysis-of-left-truncated-and-right-censored-data-using-the-uk-biobank",
    "href": "introduction.html#survival-analysis-of-left-truncated-and-right-censored-data-using-the-uk-biobank",
    "title": "Introduction",
    "section": "Survival analysis of Left-Truncated and Right-Censored Data using the UK Biobank",
    "text": "Survival analysis of Left-Truncated and Right-Censored Data using the UK Biobank\n\n\nOther resources\nNTUN Lecture: Introduction to R\nSurvival Analysis Textbook\nAdvanced Survival Analysis Blog\n\n\nFurther reading\nSurvival analysis: An Overview\nSurvival analysis of left truncated data\nSurvival analysis using age as time scale\n\n\n\nYou can do this!"
  },
  {
    "objectID": "LICENSE.html",
    "href": "LICENSE.html",
    "title": "ReCoDE Project",
    "section": "",
    "text": "BSD 3-Clause License\nCopyright (c) 2022, Imperial College London All rights reserved.\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\nNeither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE."
  },
  {
    "objectID": "survival_analysis.html",
    "href": "survival_analysis.html",
    "title": "Conducting a Survival Analysis",
    "section": "",
    "text": "Using the previous data set we curated, we can now conduct the survival analysis. The Surv() function from the {survival} package creates a survival object for use as the response in a model formula. This object is then used to calculate the survival time of our desired model.\n\n\nFirstly, we must build a survival object for all cause mortality, (this can be altered to different types of death see Advanced Survival Analysis).\n\n#Survival analysis people with [disease] vs [no disease] \nlibrary(survival)\nlibrary(survminer)\nlibrary(ggplot2)\nlibrary(gtsummary)\nlibrary(knitr)\nlibrary(dplyr)\n\nload(\"data/result.RData\")\ndeath$allcause_death &lt;- as.numeric(death$allcause_death)\n\nSurv(death$time_years, death$allcause_death)[1:10]\n\n [1] 67.56742  58.25051+ 72.41889+ 64.75291+ 82.58453+ 65.41821+ 64.25188+\n [8] 79.67146+ 81.50308+ 67.08556+\n\n\nFrom this we can see that only the first person experienced the event at 67.56 years, the rest, as indicated by the “+” have not experienced the event and therefore are said to be censored.\n\n\n\nIt is common that our code returns an error: “Invalid status value, must be logical or numeric”, if we have not specified the type of variable we want to store our all-cause mortality variable (status). This can be easily corrected with the code below.\n\n#Surv(death$time_years, death$allcause_death): Invalid status value, must be logical or numeric. If this error appears, simply convert to numeric\n\n#death$allcause_death &lt;- as.numeric(death$allcause_death)\n\n\n\n\nLet’s now use the survfit() function to create the survival curves for the entire cohort using the Kaplan-Meier method. In this example we defined the outcome as 0/1 for airflow obstruction.\n\nLTRC_ats &lt;- Surv(time =death$Age, time2 = death$time_years, event = death$allcause_death)\n\n#Unadjusted for covariates\nfit1 &lt;- survfit(LTRC_ats ~ AO.fev1fvc, data = death)\nsummary_fit1 &lt;- summary(fit1)\n\ntime &lt;- summary_fit1$time\nn_risk &lt;- summary_fit1$n.risk\nsurv &lt;- summary_fit1$surv\nlower_ci &lt;- summary_fit1$lower\nupper_ci &lt;- summary_fit1$upper\n\n# Display the first few rows of these components\nresult &lt;- data.frame(\n  Time = time[1:10],\n  N_Risk = n_risk[1:10],\n  Survival = surv[1:10],\n  Lower_CI = lower_ci[1:10],\n  Upper_CI = upper_ci[1:10]\n)\n\nprint(result)\n\n       Time N_Risk  Survival  Lower_CI  Upper_CI\n1  40.29295   2471 0.9995953 0.9988026 1.0000000\n2  40.53388   2470 0.9991906 0.9980700 1.0000000\n3  40.78029   2469 0.9987859 0.9974139 1.0000000\n4  41.05955   7386 0.9986507 0.9972535 1.0000000\n5  41.23751   7385 0.9985155 0.9970936 0.9999394\n6  41.34428   7384 0.9983802 0.9969341 0.9998284\n7  41.34702   7383 0.9982450 0.9967751 0.9997171\n8  41.38809   7382 0.9981098 0.9966164 0.9996054\n9  41.39083   7381 0.9979746 0.9964581 0.9994933\n10 41.42642   7380 0.9978393 0.9963001 0.9993809"
  },
  {
    "objectID": "survival_analysis.html#univariate-unadjusted-model",
    "href": "survival_analysis.html#univariate-unadjusted-model",
    "title": "Conducting a Survival Analysis",
    "section": "",
    "text": "Firstly, we must build a survival object for all cause mortality, (this can be altered to different types of death see Advanced Survival Analysis).\n\n#Survival analysis people with [disease] vs [no disease] \nlibrary(survival)\nlibrary(survminer)\nlibrary(ggplot2)\nlibrary(gtsummary)\nlibrary(knitr)\nlibrary(dplyr)\n\nload(\"data/result.RData\")\ndeath$allcause_death &lt;- as.numeric(death$allcause_death)\n\nSurv(death$time_years, death$allcause_death)[1:10]\n\n [1] 67.56742  58.25051+ 72.41889+ 64.75291+ 82.58453+ 65.41821+ 64.25188+\n [8] 79.67146+ 81.50308+ 67.08556+\n\n\nFrom this we can see that only the first person experienced the event at 67.56 years, the rest, as indicated by the “+” have not experienced the event and therefore are said to be censored."
  },
  {
    "objectID": "survival_analysis.html#note-possible-error",
    "href": "survival_analysis.html#note-possible-error",
    "title": "Conducting a Survival Analysis",
    "section": "",
    "text": "It is common that our code returns an error: “Invalid status value, must be logical or numeric”, if we have not specified the type of variable we want to store our all-cause mortality variable (status). This can be easily corrected with the code below.\n\n#Surv(death$time_years, death$allcause_death): Invalid status value, must be logical or numeric. If this error appears, simply convert to numeric\n\n#death$allcause_death &lt;- as.numeric(death$allcause_death)"
  },
  {
    "objectID": "survival_analysis.html#creating-survival-curves",
    "href": "survival_analysis.html#creating-survival-curves",
    "title": "Conducting a Survival Analysis",
    "section": "",
    "text": "Let’s now use the survfit() function to create the survival curves for the entire cohort using the Kaplan-Meier method. In this example we defined the outcome as 0/1 for airflow obstruction.\n\nLTRC_ats &lt;- Surv(time =death$Age, time2 = death$time_years, event = death$allcause_death)\n\n#Unadjusted for covariates\nfit1 &lt;- survfit(LTRC_ats ~ AO.fev1fvc, data = death)\nsummary_fit1 &lt;- summary(fit1)\n\ntime &lt;- summary_fit1$time\nn_risk &lt;- summary_fit1$n.risk\nsurv &lt;- summary_fit1$surv\nlower_ci &lt;- summary_fit1$lower\nupper_ci &lt;- summary_fit1$upper\n\n# Display the first few rows of these components\nresult &lt;- data.frame(\n  Time = time[1:10],\n  N_Risk = n_risk[1:10],\n  Survival = surv[1:10],\n  Lower_CI = lower_ci[1:10],\n  Upper_CI = upper_ci[1:10]\n)\n\nprint(result)\n\n       Time N_Risk  Survival  Lower_CI  Upper_CI\n1  40.29295   2471 0.9995953 0.9988026 1.0000000\n2  40.53388   2470 0.9991906 0.9980700 1.0000000\n3  40.78029   2469 0.9987859 0.9974139 1.0000000\n4  41.05955   7386 0.9986507 0.9972535 1.0000000\n5  41.23751   7385 0.9985155 0.9970936 0.9999394\n6  41.34428   7384 0.9983802 0.9969341 0.9998284\n7  41.34702   7383 0.9982450 0.9967751 0.9997171\n8  41.38809   7382 0.9981098 0.9966164 0.9996054\n9  41.39083   7381 0.9979746 0.9964581 0.9994933\n10 41.42642   7380 0.9978393 0.9963001 0.9993809"
  },
  {
    "objectID": "survival_analysis.html#kaplan-meier-curve-and-log-rank-test",
    "href": "survival_analysis.html#kaplan-meier-curve-and-log-rank-test",
    "title": "Conducting a Survival Analysis",
    "section": "Kaplan-Meier Curve and Log-Rank test",
    "text": "Kaplan-Meier Curve and Log-Rank test\nThe Kaplan-Meier method is a widely used technique for estimating survival times and probabilities. The results are represented as a step function, with each step corresponding to an event occurrence.\nTo compare survival curves between different groups, the Log-rank test is commonly used. This statistical test evaluates whether there are significant differences in survival distributions by comparing observed and expected event rates across groups.\n\n#Plotting the results \n\nkm_plot &lt;- ggsurvplot(\n  fit1, \n  data = death, \n  conf.int = TRUE,\n  risk.table = TRUE,\n  ggtheme = theme_minimal(),\n  title = \"Kaplan-Meier Survival Curve\",\n  xlab = \"Time in Years\",\n  ylab = \"Survival Probability\",\n  legend.labs = c(\"No Airflow Obstruction\", \"Airflow Obstruction\"),#Change stata\n  xlim = c(40, max(fit1$time)),  # Set x-axis limits (start at 40 min age)\n  risk.table.fontsize = 3,  # Adjust the font size for the risk table numbers\n  tables.theme = theme_survminer(\n    font.main = 8, \n    font.submain = 8, \n    font.caption = 8, \n    font.x = 8, \n    font.y = 8, \n    font.tickslab = 8\n  )\n)\n\nprint(km_plot)"
  },
  {
    "objectID": "survival_analysis.html#overview-of-the-survival-model",
    "href": "survival_analysis.html#overview-of-the-survival-model",
    "title": "Conducting a Survival Analysis",
    "section": "Overview of the survival model",
    "text": "Overview of the survival model\nWe can present an overview of the survival model in a table.\n\nsummary_fit1 &lt;- summary(fit1)\n# Extract key summary statistics\nsummary_table &lt;- data.frame(\n  Time = summary_fit1$time,\n  N.risk = summary_fit1$n.risk,\n  N.event = summary_fit1$n.event,\n  Survival = summary_fit1$surv,\n  Standard.Error = summary_fit1$std.err,\n  Lower.CI = summary_fit1$lower,\n  Upper.CI = summary_fit1$upper\n  )\n\n# Display the summary table\nkable(summary_table[1:15, ], caption = \"Summary of Survival Fit for Airflow obstruction (AO.fev1fvc)\")\n\n\nSummary of Survival Fit for Airflow obstruction (AO.fev1fvc)\n\n\n\n\n\n\n\n\n\n\n\nTime\nN.risk\nN.event\nSurvival\nStandard.Error\nLower.CI\nUpper.CI\n\n\n\n\n40.29295\n2471\n1\n0.9995953\n0.0004046\n0.9988026\n1.0000000\n\n\n40.53388\n2470\n1\n0.9991906\n0.0005721\n0.9980700\n1.0000000\n\n\n40.78029\n2469\n1\n0.9987859\n0.0007005\n0.9974139\n1.0000000\n\n\n41.05955\n7386\n1\n0.9986507\n0.0007134\n0.9972535\n1.0000000\n\n\n41.23751\n7385\n1\n0.9985155\n0.0007260\n0.9970936\n0.9999394\n\n\n41.34428\n7384\n1\n0.9983802\n0.0007384\n0.9969341\n0.9998284\n\n\n41.34702\n7383\n1\n0.9982450\n0.0007505\n0.9967751\n0.9997171\n\n\n41.38809\n7382\n1\n0.9981098\n0.0007625\n0.9966164\n0.9996054\n\n\n41.39083\n7381\n1\n0.9979746\n0.0007743\n0.9964581\n0.9994933\n\n\n41.42642\n7380\n1\n0.9978393\n0.0007859\n0.9963001\n0.9993809\n\n\n41.43737\n7379\n1\n0.9977041\n0.0007974\n0.9961425\n0.9992682\n\n\n41.46201\n7378\n1\n0.9975689\n0.0008087\n0.9959852\n0.9991551\n\n\n41.61533\n7377\n1\n0.9974336\n0.0008198\n0.9958282\n0.9990417\n\n\n41.74675\n7376\n1\n0.9972984\n0.0008307\n0.9956715\n0.9989280\n\n\n41.80698\n7375\n1\n0.9971632\n0.0008416\n0.9955151\n0.9988140"
  },
  {
    "objectID": "survival_analysis.html#calculating-median-survival-time",
    "href": "survival_analysis.html#calculating-median-survival-time",
    "title": "Conducting a Survival Analysis",
    "section": "Calculating Median Survival time",
    "text": "Calculating Median Survival time\nThe median survival time is often reported in a survival analysis for each of the groups we are comparing.\n\nmedian_survival &lt;- fit1\n\nmedian_survival\n\nCall: survfit(formula = LTRC_ats ~ AO.fev1fvc, data = death)\n\n   1325 observations deleted due to missingness \n             records  n.max n.start events median 0.95LCL 0.95UCL\nAO.fev1fvc=0  229908 136318    2471  11251   86.5      NA      NA\nAO.fev1fvc=1   21644  13187     246   2164   85.7    85.6      NA\n\n\nWe can see that the median survival time for people without airflow obstruction is 86.5 years compared to 85.7 years in people with airflow obstruction. Meaning that people with AO live less than those without."
  },
  {
    "objectID": "survival_analysis.html#log-rank-test",
    "href": "survival_analysis.html#log-rank-test",
    "title": "Conducting a Survival Analysis",
    "section": "Log Rank Test",
    "text": "Log Rank Test\n\n# Create the survival object for right-censored data\nright_censored_surv &lt;- Surv(time = death$time_years, event = death$allcause_death)\n\n# Fit the survival model\nfit2 &lt;- survfit(right_censored_surv ~ AO.fev1fvc, data = death)\n\n# Perform log-rank test\nlog_rank_test &lt;- survdiff(right_censored_surv ~ AO.fev1fvc, data = death)\n\n#Log-rank test results \n\nprint(log_rank_test)\n\nCall:\nsurvdiff(formula = right_censored_surv ~ AO.fev1fvc, data = death)\n\n                  N Observed Expected (O-E)^2/E (O-E)^2/V\nAO.fev1fvc=0 231027    12370    13399        79       869\nAO.fev1fvc=1  21850     2370     1341       790       869\n\n Chisq= 869  on 1 degrees of freedom, p= &lt;2e-16 \n\n\nA significant Log-Rank test results means that there are statistically significant differences between the two groups we are comparing (e.g. People with AO vs people without AO)"
  },
  {
    "objectID": "survival_analysis.html#export-results-in-a-table",
    "href": "survival_analysis.html#export-results-in-a-table",
    "title": "Conducting a Survival Analysis",
    "section": "Export results in a table",
    "text": "Export results in a table\nFrom the summary results, we can export the results in a table, where exp(coef) corresponds to the Hazard Ratio (HR), we also report the 95% Confidence Intervals and the P-Value for our outcome and each covariate.\n\ncoxph_LTRC_airflow %&gt;%\n  tbl_regression(exponentiate = TRUE) %&gt;%\n  bold_p(t = 0.05) %&gt;%\n  modify_table_styling(\n    columns = \"label\",\n    rows = variable == \"AO.fev1fvc\",\n    label = \"Airflow obstruction\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\nAirflow obstruction\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.66\n1.58, 1.74\n&lt;0.001\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n1.45\n1.41, 1.51\n&lt;0.001\n\n\nbmi\n1.03\n1.02, 1.03\n&lt;0.001\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n0.94\n0.88, 1.01\n0.088\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n2.37\n2.26, 2.49\n&lt;0.001\n\n\n    Previous\n1.19\n1.14, 1.23\n&lt;0.001\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n1.00\n0.87, 1.15\n&gt;0.9\n\n\n    Bristol\n0.97\n0.85, 1.10\n0.6\n\n\n    Bury\n1.18\n1.04, 1.35\n0.010\n\n\n    Cardiff\n1.05\n0.91, 1.21\n0.5\n\n\n    Croydon\n1.00\n0.87, 1.15\n&gt;0.9\n\n\n    Edinburgh\n1.12\n0.97, 1.28\n0.13\n\n\n    Glasgow\n1.16\n1.01, 1.33\n0.038\n\n\n    Leeds\n0.92\n0.82, 1.04\n0.2\n\n\n    Liverpool\n1.01\n0.89, 1.15\n0.8\n\n\n    Manchester\n0.98\n0.85, 1.14\n0.8\n\n\n    Middlesborough\n1.02\n0.89, 1.17\n0.8\n\n\n    Newcastle\n0.98\n0.86, 1.11\n0.7\n\n\n    Nottingham\n1.02\n0.90, 1.16\n0.8\n\n\n    Oxford\n0.94\n0.81, 1.10\n0.4\n\n\n    Reading\n0.91\n0.80, 1.04\n0.2\n\n\n    Sheffield\n1.02\n0.89, 1.16\n0.8\n\n\n    Stoke\n0.96\n0.84, 1.11\n0.6\n\n\n    Swansea\n1.52\n1.21, 1.91\n&lt;0.001\n\n\n    Wrexham\n0.98\n0.54, 1.79\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\n#Save table as docx\n#flex_tbl &lt;- as_flex_table(tb1)\n# Save as Word document\n#read_docx() %&gt;%\n#  body_add_flextable(value = flex_tbl) %&gt;%\n#  print(target = \"allcause_mortality.docx\")"
  },
  {
    "objectID": "survival_analysis.html#present-results-in-a-forest-plot",
    "href": "survival_analysis.html#present-results-in-a-forest-plot",
    "title": "Conducting a Survival Analysis",
    "section": "Present results in a forest plot",
    "text": "Present results in a forest plot\nThe results from the Cox Proportional Hazard model may also be presented in a graphical manner using a forest plot.\n\nForest plot with all variables that were included in the model\n\n\n\n\n\n\n\n\n\n\n\nForest plot selecting variables we want to present\n\n# Extract the coefficients and confidence intervals\ncoefs &lt;- summary(coxph_LTRC_airflow)$coefficients\nconfint &lt;- summary(coxph_LTRC_airflow)$conf.int\n\n# Exclude UKB_centre variables\nexclude_indices &lt;- grepl(\"UKB_centre\", rownames(coefs))\ncoefs &lt;- coefs[!exclude_indices, ]\nconfint &lt;- confint[!exclude_indices, ]\n\n# Create a dataframe for plotting\nforest_data &lt;- data.frame(\n    Variable = rownames(coefs),\n    HR = coefs[, \"exp(coef)\"],\n    LowerCI = confint[, \"lower .95\"],\n    UpperCI = confint[, \"upper .95\"]\n)\n\n# Rename the specific variable\n# Optionally, clean up other variable names for better readability\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"AO.fev1fvc\", \"Airflow obstruction\", forest_data$Variable)\n\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"bmi\", \"BMI\", forest_data$Variable)\n\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"EthnicityWhite\", \"European (White) Ancestry\", forest_data$Variable)\n\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"SexMale\", \"Males\", forest_data$Variable)\n\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"Smoking_statusCurrent\", \"Current Smokers\", forest_data$Variable)\n\nforest_data$Variable &lt;- ifelse(forest_data$Variable == \"Smoking_statusPrevious\", \"Previous Smokers\", forest_data$Variable)\n\n# Specify the desired order of variables\ndesired_order &lt;- c(\"Airflow obstruction\", \"BMI\", \"European (White) Ancestry\", \"Males\", \"Current Smokers\", \"Previous Smokers\")\n\n# Set the levels of the Variable column according to the desired order\nforest_data$Variable &lt;- factor(forest_data$Variable, levels = rev(desired_order))\n\n# Create the forest plot\nforest_plot &lt;- ggplot(forest_data, aes(x = HR, y = Variable)) +\n    geom_point() +\n    geom_errorbarh(aes(xmin = LowerCI, xmax = UpperCI), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\") +\n    labs(title = \"Forest Plot for Cox Proportional Hazards Model\",\n         x = \"Hazard Ratio\",\n         y = \"Variables\") +\n    theme_minimal()\n\n# Display the plot\nprint(forest_plot)"
  },
  {
    "objectID": "extension.html",
    "href": "extension.html",
    "title": "Advanced survival analysis",
    "section": "",
    "text": "A survival analysis using all-cause mortality is informative for us to know that a disease, treatment or characteristic may increase the risk of someone dying. However, it is useful to have a better understanding on what may be driving the high mortality risk. Conducting a survival analysis stratifying by cause of death is a common approach.\nMortality data is often coded using International Disease Classification codes v.10 (ICD-10). There are multiple categories for types of death, but for simplicity here are some examples, which we would be using in this project.\n\n\n\n\n\n\n\n\nCause of Death\nICD-10 Code\nDescription\n\n\n\n\nNatural Causes\nR999\nDeath due to natural processes such as aging or disease without specific cause specified.\n\n\nCardiovascular Diseases\nI00-I999\nDiseases of the circulatory system such as heart attack and strokes\n\n\nRespiratory Diseases\nJ00-J999\nRespiratory conditions such as pneumonia, COPD, asthma\n\n\nNeoplasm (cancer)\nC00-D48\nDeath due to any type of cancers categorised by organ or tissue affected\n\n\nExternal Causes\nV01-Y89\nDeath due to unintentional causes such as accidents or drowning\n\n\n\nMore info on International Classification of Disease V.10\n\n\n\n\n\nload(\"data/result.RData\")\n\nlibrary(dplyr)\n\n# Define the ICD-10 code ranges for each category\ncardiovascular_codes &lt;- c(paste0(\"I\", 0:999))\nrespiratory_codes &lt;- c(paste0(\"J\", 0:999))\nneoplasm_codes &lt;- c(paste0(\"C\", 0:99), paste0(\"D0\", 0:99), paste0(\"D1\", 0:99), paste0(\"D2\", 0:99), paste0(\"D3\", 0:99), paste0(\"D4\", 0:99))\n#external_causes &lt;- c(paste0(\"V\", 0:99), paste0(\"W\", 0:99), paste0(\"X\", 0:99), paste0(\"Y\", 0:99))\n\n# Create new variables for each category\ndeath2 &lt;- death %&gt;%\n  mutate(\n    cardiovascular_death = ifelse(cofdmain %in% cardiovascular_codes, 1, 0),\n    respiratory_death = ifelse(cofdmain %in% respiratory_codes, 1, 0),\n    neoplasm_death = ifelse(cofdmain %in% neoplasm_codes, 1, 0)#,\n    #external_cause_death = ifelse(cofdmain %in% external_causes, 1, 0)\n  )\n\n# Exclude external causes from the other categories\n#death2 &lt;- death %&gt;%\n # mutate(\n  #  cardiovascular_death = ifelse(external_cause_death == 1, 0, cardiovascular_death),\n   # respiratory_death = ifelse(external_cause_death == 1, 0, respiratory_death),\n    #neoplasm_death = ifelse(external_cause_death == 1, 0, neoplasm_death)\n#  )\n\n\n\n\n\n\n#Same as above but now with the different types of death \n\n#Cardiovascular mortality \ndeath2$cardiovascular_death &lt;- as.character(death2$cardiovascular_death)\ndeath2$cardiovascular_death[is.na(death2$cardiovascular_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$cardiovascular_death[death2$cardiovascular_death &gt; 0] &lt;- 1\ndeath2$cardiovascular_death &lt;- as.numeric(death2$cardiovascular_death)\n\n#Respiratory mortality\ndeath2$respiratory_death &lt;- as.character(death2$respiratory_death)\ndeath2$respiratory_death[is.na(death2$respiratory_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$respiratory_death[death2$respiratory_death &gt; 0] &lt;- 1\ndeath2$respiratory_death &lt;- as.numeric(death2$respiratory_death)\n\n\n#Neoplasm mortality\ndeath2$neoplasm_death &lt;- as.character(death2$neoplasm_death)\ndeath2$neoplasm_death[is.na(death2$neoplasm_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$neoplasm_death[death2$neoplasm_death &gt; 0] &lt;- 1\ndeath2$neoplasm_death &lt;- as.numeric(death2$neoplasm_death)\n\n\n\n\n\nlibrary(survival)\nlibrary(survminer)\nlibrary(ggplot2)\nlibrary(gtsummary)\n\n#Order smoking status correctly\ndeath2$Smoking_status &lt;- as.factor(death2$Smoking_status)\ndeath2$Smoking_status &lt;- relevel(death2$Smoking_status, ref = \"Never\")\n\n#All cause mortality adjusted for covariates\n\n#E.g. Cardiovascular mortality \n\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$cardiovascular_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.69\n1.52, 1.87\n&lt;0.001\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n2.01\n1.86, 2.18\n&lt;0.001\n\n\nbmi\n1.05\n1.04, 1.05\n&lt;0.001\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n1.00\n0.85, 1.18\n&gt;0.9\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n3.10\n2.79, 3.44\n&lt;0.001\n\n\n    Previous\n1.20\n1.10, 1.31\n&lt;0.001\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.90\n0.66, 1.23\n0.5\n\n\n    Bristol\n0.84\n0.63, 1.11\n0.2\n\n\n    Bury\n1.13\n0.86, 1.50\n0.4\n\n\n    Cardiff\n1.02\n0.74, 1.39\n&gt;0.9\n\n\n    Croydon\n0.86\n0.63, 1.17\n0.3\n\n\n    Edinburgh\n1.13\n0.84, 1.54\n0.4\n\n\n    Glasgow\n1.26\n0.94, 1.69\n0.13\n\n\n    Leeds\n0.85\n0.65, 1.12\n0.2\n\n\n    Liverpool\n0.98\n0.73, 1.30\n0.9\n\n\n    Manchester\n0.81\n0.58, 1.13\n0.2\n\n\n    Middlesborough\n0.91\n0.67, 1.24\n0.6\n\n\n    Newcastle\n0.91\n0.69, 1.21\n0.5\n\n\n    Nottingham\n1.03\n0.77, 1.36\n0.9\n\n\n    Oxford\n0.93\n0.66, 1.31\n0.7\n\n\n    Reading\n0.75\n0.55, 1.02\n0.063\n\n\n    Sheffield\n0.93\n0.70, 1.25\n0.6\n\n\n    Stoke\n0.72\n0.52, 0.99\n0.042\n\n\n    Swansea\n1.39\n0.83, 2.33\n0.2\n\n\n    Wrexham\n1.22\n0.38, 3.88\n0.7\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt1 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n#summary(coxph_LTRC_airflow)\n\n#Respiratory mortality\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$respiratory_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n4.67\n4.02, 5.42\n&lt;0.001\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n1.78\n1.54, 2.06\n&lt;0.001\n\n\nbmi\n1.05\n1.03, 1.06\n&lt;0.001\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n1.23\n0.89, 1.70\n0.2\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n3.25\n2.69, 3.93\n&lt;0.001\n\n\n    Previous\n1.38\n1.17, 1.63\n&lt;0.001\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.72\n0.39, 1.32\n0.3\n\n\n    Bristol\n0.93\n0.55, 1.57\n0.8\n\n\n    Bury\n1.06\n0.62, 1.79\n0.8\n\n\n    Cardiff\n0.82\n0.45, 1.51\n0.5\n\n\n    Croydon\n1.08\n0.62, 1.90\n0.8\n\n\n    Edinburgh\n1.26\n0.72, 2.20\n0.4\n\n\n    Glasgow\n0.87\n0.49, 1.56\n0.6\n\n\n    Leeds\n0.88\n0.53, 1.46\n0.6\n\n\n    Liverpool\n0.98\n0.58, 1.67\n&gt;0.9\n\n\n    Manchester\n0.90\n0.49, 1.65\n0.7\n\n\n    Middlesborough\n1.06\n0.61, 1.86\n0.8\n\n\n    Newcastle\n1.09\n0.65, 1.82\n0.8\n\n\n    Nottingham\n0.82\n0.48, 1.42\n0.5\n\n\n    Oxford\n0.92\n0.49, 1.74\n0.8\n\n\n    Reading\n0.76\n0.43, 1.34\n0.3\n\n\n    Sheffield\n1.17\n0.69, 2.00\n0.6\n\n\n    Stoke\n0.93\n0.52, 1.65\n0.8\n\n\n    Swansea\n1.86\n0.81, 4.28\n0.15\n\n\n    Wrexham\n0.00\n0.00, Inf\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt2 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n#summary(coxph_LTRC_airflow)\n\n#Respiratory mortality\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$neoplasm_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.25\n1.07, 1.47\n0.006\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n1.65\n1.49, 1.83\n&lt;0.001\n\n\nbmi\n1.01\n1.00, 1.02\n0.062\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n0.90\n0.73, 1.10\n0.3\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n1.27\n1.07, 1.51\n0.007\n\n\n    Previous\n1.14\n1.02, 1.27\n0.021\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.98\n0.62, 1.54\n&gt;0.9\n\n\n    Bristol\n1.16\n0.78, 1.73\n0.5\n\n\n    Bury\n1.35\n0.90, 2.03\n0.14\n\n\n    Cardiff\n1.07\n0.68, 1.68\n0.8\n\n\n    Croydon\n1.17\n0.76, 1.80\n0.5\n\n\n    Edinburgh\n1.20\n0.77, 1.86\n0.4\n\n\n    Glasgow\n1.28\n0.83, 1.97\n0.3\n\n\n    Leeds\n1.14\n0.78, 1.68\n0.5\n\n\n    Liverpool\n1.21\n0.81, 1.82\n0.3\n\n\n    Manchester\n0.97\n0.60, 1.56\n0.9\n\n\n    Middlesborough\n1.32\n0.86, 2.03\n0.2\n\n\n    Newcastle\n1.16\n0.77, 1.74\n0.5\n\n\n    Nottingham\n1.00\n0.66, 1.52\n&gt;0.9\n\n\n    Oxford\n1.12\n0.70, 1.80\n0.6\n\n\n    Reading\n1.24\n0.83, 1.87\n0.3\n\n\n    Sheffield\n1.11\n0.73, 1.69\n0.6\n\n\n    Stoke\n1.19\n0.77, 1.83\n0.4\n\n\n    Swansea\n1.84\n0.92, 3.68\n0.084\n\n\n    Wrexham\n0.94\n0.13, 6.90\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt3 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n#summary(coxph_LTRC_airflow)\n\n\ntbl_merge_ex2 &lt;-\n  tbl_merge(\n    tbls = list(t1, t2, t3),\n    tab_spanner = c(\"**Cardiovascular mortality**\",\n                    \"**Respiratory mortality**\", \"**Neoplasm (cancer) mortality**\")\n  )\n\ntbl_merge_ex2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nCardiovascular mortality\nRespiratory mortality\nNeoplasm (cancer) mortality\n\n\nHR1\n95% CI1\np-value\nHR1\n95% CI1\np-value\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.69\n1.52, 1.87\n&lt;0.001\n4.67\n4.02, 5.42\n&lt;0.001\n1.25\n1.07, 1.47\n0.006\n\n\nSex\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Male\n2.01\n1.86, 2.18\n&lt;0.001\n1.78\n1.54, 2.06\n&lt;0.001\n1.65\n1.49, 1.83\n&lt;0.001\n\n\nbmi\n1.05\n1.04, 1.05\n&lt;0.001\n1.05\n1.03, 1.06\n&lt;0.001\n1.01\n1.00, 1.02\n0.062\n\n\nEthnicity\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    White\n1.00\n0.85, 1.18\n&gt;0.9\n1.23\n0.89, 1.70\n0.2\n0.90\n0.73, 1.10\n0.3\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Current\n3.10\n2.79, 3.44\n&lt;0.001\n3.25\n2.69, 3.93\n&lt;0.001\n1.27\n1.07, 1.51\n0.007\n\n\n    Previous\n1.20\n1.10, 1.31\n&lt;0.001\n1.38\n1.17, 1.63\n&lt;0.001\n1.14\n1.02, 1.27\n0.021\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Birmingham\n0.90\n0.66, 1.23\n0.5\n0.72\n0.39, 1.32\n0.3\n0.98\n0.62, 1.54\n&gt;0.9\n\n\n    Bristol\n0.84\n0.63, 1.11\n0.2\n0.93\n0.55, 1.57\n0.8\n1.16\n0.78, 1.73\n0.5\n\n\n    Bury\n1.13\n0.86, 1.50\n0.4\n1.06\n0.62, 1.79\n0.8\n1.35\n0.90, 2.03\n0.14\n\n\n    Cardiff\n1.02\n0.74, 1.39\n&gt;0.9\n0.82\n0.45, 1.51\n0.5\n1.07\n0.68, 1.68\n0.8\n\n\n    Croydon\n0.86\n0.63, 1.17\n0.3\n1.08\n0.62, 1.90\n0.8\n1.17\n0.76, 1.80\n0.5\n\n\n    Edinburgh\n1.13\n0.84, 1.54\n0.4\n1.26\n0.72, 2.20\n0.4\n1.20\n0.77, 1.86\n0.4\n\n\n    Glasgow\n1.26\n0.94, 1.69\n0.13\n0.87\n0.49, 1.56\n0.6\n1.28\n0.83, 1.97\n0.3\n\n\n    Leeds\n0.85\n0.65, 1.12\n0.2\n0.88\n0.53, 1.46\n0.6\n1.14\n0.78, 1.68\n0.5\n\n\n    Liverpool\n0.98\n0.73, 1.30\n0.9\n0.98\n0.58, 1.67\n&gt;0.9\n1.21\n0.81, 1.82\n0.3\n\n\n    Manchester\n0.81\n0.58, 1.13\n0.2\n0.90\n0.49, 1.65\n0.7\n0.97\n0.60, 1.56\n0.9\n\n\n    Middlesborough\n0.91\n0.67, 1.24\n0.6\n1.06\n0.61, 1.86\n0.8\n1.32\n0.86, 2.03\n0.2\n\n\n    Newcastle\n0.91\n0.69, 1.21\n0.5\n1.09\n0.65, 1.82\n0.8\n1.16\n0.77, 1.74\n0.5\n\n\n    Nottingham\n1.03\n0.77, 1.36\n0.9\n0.82\n0.48, 1.42\n0.5\n1.00\n0.66, 1.52\n&gt;0.9\n\n\n    Oxford\n0.93\n0.66, 1.31\n0.7\n0.92\n0.49, 1.74\n0.8\n1.12\n0.70, 1.80\n0.6\n\n\n    Reading\n0.75\n0.55, 1.02\n0.063\n0.76\n0.43, 1.34\n0.3\n1.24\n0.83, 1.87\n0.3\n\n\n    Sheffield\n0.93\n0.70, 1.25\n0.6\n1.17\n0.69, 2.00\n0.6\n1.11\n0.73, 1.69\n0.6\n\n\n    Stoke\n0.72\n0.52, 0.99\n0.042\n0.93\n0.52, 1.65\n0.8\n1.19\n0.77, 1.83\n0.4\n\n\n    Swansea\n1.39\n0.83, 2.33\n0.2\n1.86\n0.81, 4.28\n0.15\n1.84\n0.92, 3.68\n0.084\n\n\n    Wrexham\n1.22\n0.38, 3.88\n0.7\n0.00\n0.00, Inf\n&gt;0.9\n0.94\n0.13, 6.90\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\n#tbl_merge_ex2 %&gt;%\n # as_flex_table() %&gt;%\n  #flextable::save_as_docx(path = \"NAMEs.docx\")"
  },
  {
    "objectID": "extension.html#arrange-mortality-data-by-types-of-death-using-icd-codes",
    "href": "extension.html#arrange-mortality-data-by-types-of-death-using-icd-codes",
    "title": "Advanced survival analysis",
    "section": "",
    "text": "load(\"data/result.RData\")\n\nlibrary(dplyr)\n\n# Define the ICD-10 code ranges for each category\ncardiovascular_codes &lt;- c(paste0(\"I\", 0:999))\nrespiratory_codes &lt;- c(paste0(\"J\", 0:999))\nneoplasm_codes &lt;- c(paste0(\"C\", 0:99), paste0(\"D0\", 0:99), paste0(\"D1\", 0:99), paste0(\"D2\", 0:99), paste0(\"D3\", 0:99), paste0(\"D4\", 0:99))\n#external_causes &lt;- c(paste0(\"V\", 0:99), paste0(\"W\", 0:99), paste0(\"X\", 0:99), paste0(\"Y\", 0:99))\n\n# Create new variables for each category\ndeath2 &lt;- death %&gt;%\n  mutate(\n    cardiovascular_death = ifelse(cofdmain %in% cardiovascular_codes, 1, 0),\n    respiratory_death = ifelse(cofdmain %in% respiratory_codes, 1, 0),\n    neoplasm_death = ifelse(cofdmain %in% neoplasm_codes, 1, 0)#,\n    #external_cause_death = ifelse(cofdmain %in% external_causes, 1, 0)\n  )\n\n# Exclude external causes from the other categories\n#death2 &lt;- death %&gt;%\n # mutate(\n  #  cardiovascular_death = ifelse(external_cause_death == 1, 0, cardiovascular_death),\n   # respiratory_death = ifelse(external_cause_death == 1, 0, respiratory_death),\n    #neoplasm_death = ifelse(external_cause_death == 1, 0, neoplasm_death)\n#  )"
  },
  {
    "objectID": "extension.html#censoring-of-the-data-using-different-types-of-death",
    "href": "extension.html#censoring-of-the-data-using-different-types-of-death",
    "title": "Advanced survival analysis",
    "section": "",
    "text": "#Same as above but now with the different types of death \n\n#Cardiovascular mortality \ndeath2$cardiovascular_death &lt;- as.character(death2$cardiovascular_death)\ndeath2$cardiovascular_death[is.na(death2$cardiovascular_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$cardiovascular_death[death2$cardiovascular_death &gt; 0] &lt;- 1\ndeath2$cardiovascular_death &lt;- as.numeric(death2$cardiovascular_death)\n\n#Respiratory mortality\ndeath2$respiratory_death &lt;- as.character(death2$respiratory_death)\ndeath2$respiratory_death[is.na(death2$respiratory_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$respiratory_death[death2$respiratory_death &gt; 0] &lt;- 1\ndeath2$respiratory_death &lt;- as.numeric(death2$respiratory_death)\n\n\n#Neoplasm mortality\ndeath2$neoplasm_death &lt;- as.character(death2$neoplasm_death)\ndeath2$neoplasm_death[is.na(death2$neoplasm_death)] &lt;- 0 #No event occured (ALIVE)\ndeath2$neoplasm_death[death2$neoplasm_death &gt; 0] &lt;- 1\ndeath2$neoplasm_death &lt;- as.numeric(death2$neoplasm_death)"
  },
  {
    "objectID": "extension.html#multivariate-survival-analysis-stratified-by-cause-of-death",
    "href": "extension.html#multivariate-survival-analysis-stratified-by-cause-of-death",
    "title": "Advanced survival analysis",
    "section": "",
    "text": "library(survival)\nlibrary(survminer)\nlibrary(ggplot2)\nlibrary(gtsummary)\n\n#Order smoking status correctly\ndeath2$Smoking_status &lt;- as.factor(death2$Smoking_status)\ndeath2$Smoking_status &lt;- relevel(death2$Smoking_status, ref = \"Never\")\n\n#All cause mortality adjusted for covariates\n\n#E.g. Cardiovascular mortality \n\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$cardiovascular_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.69\n1.52, 1.87\n&lt;0.001\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n2.01\n1.86, 2.18\n&lt;0.001\n\n\nbmi\n1.05\n1.04, 1.05\n&lt;0.001\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n1.00\n0.85, 1.18\n&gt;0.9\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n3.10\n2.79, 3.44\n&lt;0.001\n\n\n    Previous\n1.20\n1.10, 1.31\n&lt;0.001\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.90\n0.66, 1.23\n0.5\n\n\n    Bristol\n0.84\n0.63, 1.11\n0.2\n\n\n    Bury\n1.13\n0.86, 1.50\n0.4\n\n\n    Cardiff\n1.02\n0.74, 1.39\n&gt;0.9\n\n\n    Croydon\n0.86\n0.63, 1.17\n0.3\n\n\n    Edinburgh\n1.13\n0.84, 1.54\n0.4\n\n\n    Glasgow\n1.26\n0.94, 1.69\n0.13\n\n\n    Leeds\n0.85\n0.65, 1.12\n0.2\n\n\n    Liverpool\n0.98\n0.73, 1.30\n0.9\n\n\n    Manchester\n0.81\n0.58, 1.13\n0.2\n\n\n    Middlesborough\n0.91\n0.67, 1.24\n0.6\n\n\n    Newcastle\n0.91\n0.69, 1.21\n0.5\n\n\n    Nottingham\n1.03\n0.77, 1.36\n0.9\n\n\n    Oxford\n0.93\n0.66, 1.31\n0.7\n\n\n    Reading\n0.75\n0.55, 1.02\n0.063\n\n\n    Sheffield\n0.93\n0.70, 1.25\n0.6\n\n\n    Stoke\n0.72\n0.52, 0.99\n0.042\n\n\n    Swansea\n1.39\n0.83, 2.33\n0.2\n\n\n    Wrexham\n1.22\n0.38, 3.88\n0.7\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt1 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n#summary(coxph_LTRC_airflow)\n\n#Respiratory mortality\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$respiratory_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n4.67\n4.02, 5.42\n&lt;0.001\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n1.78\n1.54, 2.06\n&lt;0.001\n\n\nbmi\n1.05\n1.03, 1.06\n&lt;0.001\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n1.23\n0.89, 1.70\n0.2\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n3.25\n2.69, 3.93\n&lt;0.001\n\n\n    Previous\n1.38\n1.17, 1.63\n&lt;0.001\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.72\n0.39, 1.32\n0.3\n\n\n    Bristol\n0.93\n0.55, 1.57\n0.8\n\n\n    Bury\n1.06\n0.62, 1.79\n0.8\n\n\n    Cardiff\n0.82\n0.45, 1.51\n0.5\n\n\n    Croydon\n1.08\n0.62, 1.90\n0.8\n\n\n    Edinburgh\n1.26\n0.72, 2.20\n0.4\n\n\n    Glasgow\n0.87\n0.49, 1.56\n0.6\n\n\n    Leeds\n0.88\n0.53, 1.46\n0.6\n\n\n    Liverpool\n0.98\n0.58, 1.67\n&gt;0.9\n\n\n    Manchester\n0.90\n0.49, 1.65\n0.7\n\n\n    Middlesborough\n1.06\n0.61, 1.86\n0.8\n\n\n    Newcastle\n1.09\n0.65, 1.82\n0.8\n\n\n    Nottingham\n0.82\n0.48, 1.42\n0.5\n\n\n    Oxford\n0.92\n0.49, 1.74\n0.8\n\n\n    Reading\n0.76\n0.43, 1.34\n0.3\n\n\n    Sheffield\n1.17\n0.69, 2.00\n0.6\n\n\n    Stoke\n0.93\n0.52, 1.65\n0.8\n\n\n    Swansea\n1.86\n0.81, 4.28\n0.15\n\n\n    Wrexham\n0.00\n0.00, Inf\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt2 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n#summary(coxph_LTRC_airflow)\n\n#Respiratory mortality\nLTRC_ats &lt;- Surv(time =death2$Age, time2 = death2$time_years, event = death2$neoplasm_death) #Change type of death here \ncoxph_LTRC_airflow &lt;- coxph(LTRC_ats ~ AO.fev1fvc + Sex + bmi + Ethnicity + Smoking_status + UKB_centre, data = death2)\n\ncoxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.25\n1.07, 1.47\n0.006\n\n\nSex\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n\n\n    Male\n1.65\n1.49, 1.83\n&lt;0.001\n\n\nbmi\n1.01\n1.00, 1.02\n0.062\n\n\nEthnicity\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n\n\n    White\n0.90\n0.73, 1.10\n0.3\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n\n\n    Current\n1.27\n1.07, 1.51\n0.007\n\n\n    Previous\n1.14\n1.02, 1.27\n0.021\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n\n\n    Birmingham\n0.98\n0.62, 1.54\n&gt;0.9\n\n\n    Bristol\n1.16\n0.78, 1.73\n0.5\n\n\n    Bury\n1.35\n0.90, 2.03\n0.14\n\n\n    Cardiff\n1.07\n0.68, 1.68\n0.8\n\n\n    Croydon\n1.17\n0.76, 1.80\n0.5\n\n\n    Edinburgh\n1.20\n0.77, 1.86\n0.4\n\n\n    Glasgow\n1.28\n0.83, 1.97\n0.3\n\n\n    Leeds\n1.14\n0.78, 1.68\n0.5\n\n\n    Liverpool\n1.21\n0.81, 1.82\n0.3\n\n\n    Manchester\n0.97\n0.60, 1.56\n0.9\n\n\n    Middlesborough\n1.32\n0.86, 2.03\n0.2\n\n\n    Newcastle\n1.16\n0.77, 1.74\n0.5\n\n\n    Nottingham\n1.00\n0.66, 1.52\n&gt;0.9\n\n\n    Oxford\n1.12\n0.70, 1.80\n0.6\n\n\n    Reading\n1.24\n0.83, 1.87\n0.3\n\n\n    Sheffield\n1.11\n0.73, 1.69\n0.6\n\n\n    Stoke\n1.19\n0.77, 1.83\n0.4\n\n\n    Swansea\n1.84\n0.92, 3.68\n0.084\n\n\n    Wrexham\n0.94\n0.13, 6.90\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\nt3 &lt;- coxph_LTRC_airflow %&gt;% tbl_regression(exponentiate= TRUE) %&gt;% bold_p(t = 0.05) \n#summary(coxph_LTRC_airflow)\n\n\ntbl_merge_ex2 &lt;-\n  tbl_merge(\n    tbls = list(t1, t2, t3),\n    tab_spanner = c(\"**Cardiovascular mortality**\",\n                    \"**Respiratory mortality**\", \"**Neoplasm (cancer) mortality**\")\n  )\n\ntbl_merge_ex2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nCardiovascular mortality\nRespiratory mortality\nNeoplasm (cancer) mortality\n\n\nHR1\n95% CI1\np-value\nHR1\n95% CI1\np-value\nHR1\n95% CI1\np-value\n\n\n\n\nAO.fev1fvc\n1.69\n1.52, 1.87\n&lt;0.001\n4.67\n4.02, 5.42\n&lt;0.001\n1.25\n1.07, 1.47\n0.006\n\n\nSex\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Female\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Male\n2.01\n1.86, 2.18\n&lt;0.001\n1.78\n1.54, 2.06\n&lt;0.001\n1.65\n1.49, 1.83\n&lt;0.001\n\n\nbmi\n1.05\n1.04, 1.05\n&lt;0.001\n1.05\n1.03, 1.06\n&lt;0.001\n1.01\n1.00, 1.02\n0.062\n\n\nEthnicity\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Other\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    White\n1.00\n0.85, 1.18\n&gt;0.9\n1.23\n0.89, 1.70\n0.2\n0.90\n0.73, 1.10\n0.3\n\n\nSmoking_status\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Never\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Current\n3.10\n2.79, 3.44\n&lt;0.001\n3.25\n2.69, 3.93\n&lt;0.001\n1.27\n1.07, 1.51\n0.007\n\n\n    Previous\n1.20\n1.10, 1.31\n&lt;0.001\n1.38\n1.17, 1.63\n&lt;0.001\n1.14\n1.02, 1.27\n0.021\n\n\nUKB_centre\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    Barts\n—\n—\n\n\n—\n—\n\n\n—\n—\n\n\n\n\n    Birmingham\n0.90\n0.66, 1.23\n0.5\n0.72\n0.39, 1.32\n0.3\n0.98\n0.62, 1.54\n&gt;0.9\n\n\n    Bristol\n0.84\n0.63, 1.11\n0.2\n0.93\n0.55, 1.57\n0.8\n1.16\n0.78, 1.73\n0.5\n\n\n    Bury\n1.13\n0.86, 1.50\n0.4\n1.06\n0.62, 1.79\n0.8\n1.35\n0.90, 2.03\n0.14\n\n\n    Cardiff\n1.02\n0.74, 1.39\n&gt;0.9\n0.82\n0.45, 1.51\n0.5\n1.07\n0.68, 1.68\n0.8\n\n\n    Croydon\n0.86\n0.63, 1.17\n0.3\n1.08\n0.62, 1.90\n0.8\n1.17\n0.76, 1.80\n0.5\n\n\n    Edinburgh\n1.13\n0.84, 1.54\n0.4\n1.26\n0.72, 2.20\n0.4\n1.20\n0.77, 1.86\n0.4\n\n\n    Glasgow\n1.26\n0.94, 1.69\n0.13\n0.87\n0.49, 1.56\n0.6\n1.28\n0.83, 1.97\n0.3\n\n\n    Leeds\n0.85\n0.65, 1.12\n0.2\n0.88\n0.53, 1.46\n0.6\n1.14\n0.78, 1.68\n0.5\n\n\n    Liverpool\n0.98\n0.73, 1.30\n0.9\n0.98\n0.58, 1.67\n&gt;0.9\n1.21\n0.81, 1.82\n0.3\n\n\n    Manchester\n0.81\n0.58, 1.13\n0.2\n0.90\n0.49, 1.65\n0.7\n0.97\n0.60, 1.56\n0.9\n\n\n    Middlesborough\n0.91\n0.67, 1.24\n0.6\n1.06\n0.61, 1.86\n0.8\n1.32\n0.86, 2.03\n0.2\n\n\n    Newcastle\n0.91\n0.69, 1.21\n0.5\n1.09\n0.65, 1.82\n0.8\n1.16\n0.77, 1.74\n0.5\n\n\n    Nottingham\n1.03\n0.77, 1.36\n0.9\n0.82\n0.48, 1.42\n0.5\n1.00\n0.66, 1.52\n&gt;0.9\n\n\n    Oxford\n0.93\n0.66, 1.31\n0.7\n0.92\n0.49, 1.74\n0.8\n1.12\n0.70, 1.80\n0.6\n\n\n    Reading\n0.75\n0.55, 1.02\n0.063\n0.76\n0.43, 1.34\n0.3\n1.24\n0.83, 1.87\n0.3\n\n\n    Sheffield\n0.93\n0.70, 1.25\n0.6\n1.17\n0.69, 2.00\n0.6\n1.11\n0.73, 1.69\n0.6\n\n\n    Stoke\n0.72\n0.52, 0.99\n0.042\n0.93\n0.52, 1.65\n0.8\n1.19\n0.77, 1.83\n0.4\n\n\n    Swansea\n1.39\n0.83, 2.33\n0.2\n1.86\n0.81, 4.28\n0.15\n1.84\n0.92, 3.68\n0.084\n\n\n    Wrexham\n1.22\n0.38, 3.88\n0.7\n0.00\n0.00, Inf\n&gt;0.9\n0.94\n0.13, 6.90\n&gt;0.9\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\n#tbl_merge_ex2 %&gt;%\n # as_flex_table() %&gt;%\n  #flextable::save_as_docx(path = \"NAMEs.docx\")"
  },
  {
    "objectID": "data_curation.html",
    "href": "data_curation.html",
    "title": "Data curation",
    "section": "",
    "text": "Throughout this project, we will use a synthetic version of the UK Biobank data. The UK Biobank is a large cohort data set composed of over 500,000 volunteers recruited across United Kingdom between 2006-2010. For this project, we will use data from 252,877 participants who have high quality lung function data to select participants with airflow obstruction (AO) (defined as FEV1/FVC &lt; LLN). We will use AO as out outcome to determine the mortality risk in people with AO vs people without AO.\n\n\n\n\n\n\n\n\n\n\n\n\n\nEvent (death) variables\nDescription\nCoding\nOutcome variable\nDescription\nCoding\n\n\n\n\ncofdmain\nMain cause of death coded by International Classification of Disease v10 (ICD10) This variable will be used later in the course to stratify the analysis by type of death\n0 = No event (alive/censored) 1 = Event (dead)\nAO.fev1fvc\nAirflow obstruction derived as: forced expiratory volume at 1 s/ forced vital capacity below the lower limit of normal (from NHANES equations) (FEV1/FVC&lt;LLN)\n0 = No airflow obstruction 1 = Airflow obstruction\n\n\nDate of death\nDate of participant’s death obtained from the National Death Registry\nAs character but must be changed into numeric format\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCovariates name\nDescription\nCoding\n\n\n\n\neid\nUnique participant Identification Number for anonymised data\nInterger\n\n\nAge\nAge of participant at recruitment (when they entered the study)\nInterger\n\n\nSex\nSex of participant\nMale, Female\n\n\nbmi\nBody Max Index of participant\nNumeric\n\n\nUKB_centre\nUK Biobank Centre at which the participant was recruited\nCharacter\n\n\nEthnicity\nGenetically-derived ethnicity of the participant\nWhite vs Other\n\n\nSmoking_status\nSmoking Status of the participant at recruitment\nNever, current, previous"
  },
  {
    "objectID": "data_curation.html#essential-variables",
    "href": "data_curation.html#essential-variables",
    "title": "Data curation",
    "section": "",
    "text": "Event (death) variables\nDescription\nCoding\nOutcome variable\nDescription\nCoding\n\n\n\n\ncofdmain\nMain cause of death coded by International Classification of Disease v10 (ICD10) This variable will be used later in the course to stratify the analysis by type of death\n0 = No event (alive/censored) 1 = Event (dead)\nAO.fev1fvc\nAirflow obstruction derived as: forced expiratory volume at 1 s/ forced vital capacity below the lower limit of normal (from NHANES equations) (FEV1/FVC&lt;LLN)\n0 = No airflow obstruction 1 = Airflow obstruction\n\n\nDate of death\nDate of participant’s death obtained from the National Death Registry\nAs character but must be changed into numeric format"
  },
  {
    "objectID": "data_curation.html#additional-variables-used-in-the-multivariable-adjusted-model",
    "href": "data_curation.html#additional-variables-used-in-the-multivariable-adjusted-model",
    "title": "Data curation",
    "section": "",
    "text": "Covariates name\nDescription\nCoding\n\n\n\n\neid\nUnique participant Identification Number for anonymised data\nInterger\n\n\nAge\nAge of participant at recruitment (when they entered the study)\nInterger\n\n\nSex\nSex of participant\nMale, Female\n\n\nbmi\nBody Max Index of participant\nNumeric\n\n\nUKB_centre\nUK Biobank Centre at which the participant was recruited\nCharacter\n\n\nEthnicity\nGenetically-derived ethnicity of the participant\nWhite vs Other\n\n\nSmoking_status\nSmoking Status of the participant at recruitment\nNever, current, previous"
  },
  {
    "objectID": "data_curation.html#overview-of-the-data",
    "href": "data_curation.html#overview-of-the-data",
    "title": "Data curation",
    "section": "Overview of the data",
    "text": "Overview of the data\n\nlibrary(knitr)\n\nhead_data &lt;- head(death[, c(\"Sex\",\"Smoking_status\", \"allcause_death\", \"time_years\")], 15)\n\n# Create a table\nkable(head_data, caption = \"First 15 Observations of Survival Analysis Data\")\n\n\nFirst 15 Observations of Survival Analysis Data\n\n\nSex\nSmoking_status\nallcause_death\ntime_years\n\n\n\n\nFemale\nNever\n1\n67.56742\n\n\nFemale\nNever\n0\n58.25051\n\n\nMale\nNever\n0\n72.41889\n\n\nFemale\nNever\n0\n64.75291\n\n\nFemale\nNever\n0\n82.58453\n\n\nMale\nPrevious\n0\n65.41821\n\n\nFemale\nPrevious\n0\n64.25188\n\n\nFemale\nNever\n0\n79.67146\n\n\nMale\nPrevious\n0\n81.50308\n\n\nFemale\nPrevious\n0\n67.08556\n\n\nFemale\nNever\n0\n64.08487\n\n\nMale\nNever\n0\n84.00000\n\n\nMale\nCurrent\n0\n62.16564\n\n\nFemale\nNever\n0\n74.58453\n\n\nFemale\nNever\n0\n71.33470"
  },
  {
    "objectID": "data_curation.html#how-many-participants-have-experienced-the-event-e.g.-dead",
    "href": "data_curation.html#how-many-participants-have-experienced-the-event-e.g.-dead",
    "title": "Data curation",
    "section": "How many participants have experienced the event? (e.g. dead)",
    "text": "How many participants have experienced the event? (e.g. dead)\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(knitr)\n\n# Create a summary table\nsummary_table &lt;- death %&gt;%\n  group_by(Sex, allcause_death) %&gt;%\n  summarise(count = n(), .groups = 'drop') %&gt;%\n  pivot_wider(names_from = Sex, values_from = count, values_fill = list(count = 0)) %&gt;%\n  mutate(Total = Male + Female)\n\n# Display the summary table\nkable(summary_table, caption = \"Number of participants that have died by sex\")\n\n\nNumber of participants that have died by sex\n\n\nallcause_death\nFemale\nMale\nTotal\n\n\n\n\n0\n142563\n95574\n238137\n\n\n1\n6986\n7754\n14740"
  },
  {
    "objectID": "data_curation.html#how-many-participants-have-airflow-obstruction-outcome",
    "href": "data_curation.html#how-many-participants-have-airflow-obstruction-outcome",
    "title": "Data curation",
    "section": "How many participants have airflow obstruction (outcome)?",
    "text": "How many participants have airflow obstruction (outcome)?\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(knitr)\n\nsummary_table &lt;- death %&gt;%\n  group_by(Sex, AO.fev1fvc) %&gt;%\n  summarise(count = n(), .groups = 'drop') %&gt;%\n  pivot_wider(names_from = Sex, values_from = count, values_fill = list(count = 0)) %&gt;%\n  mutate(Total = Male + Female)\n\n# Display the summary table\nkable(summary_table, caption = \"Number of participants with airflow obstruction by sex\")\n\n\nNumber of participants with airflow obstruction by sex\n\n\nAO.fev1fvc\nFemale\nMale\nTotal\n\n\n\n\n0\n139183\n91844\n231027\n\n\n1\n10366\n11484\n21850\n\n\n\n\n\n\n#save(death, file = \"data/result.RData\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Cracking time’s code: Survival analysis of large datasets",
    "section": "",
    "text": "This is a special type of analysis that takes into consideration when the event occurred rather than if the event occurred. In other words, we are focused on acquiring the rate, which is the number of events per unit time. In this exemplar will introduce you to the concept of survival analysis (also known as a time-to-event analysis) using large data sets using R.\n\nFirstly, I will highlight the steps needed to effectively clean the data, including correct censoring of the participants.\nSecondly, I will demonstrate two approaches: a univariate and a multivariate Cox Proportional regression model (which allows the incorporation of confounders).\nThirdly, we will be able to estimate the hazard ratio of an event occurring between two groups and present our findings in a Kaplan-Meier curve (univariate analysis) or in a table/forest plot (multivariate analysis).\n\nThis special type of analysis allows to calculate the risk of the event (disease, death, etc.) occurring at a given time (hazard ratio). A common timescale used in survival analysis is time-to-event, however in large cohort studies data may be left-truncated (participants entering the study at different time points), making the time-scale unsuitable. Instead, age should be considered as the timescale. This is most relevant when exploring age-dependent associations between exposures and outcomes. Therefore, it ensures accurate estimation of hazard risk and median survival times, preventing underestimation.\n\n\nIn summary, survival analysis using large cohort data may be challenging and require comprehensive understanding of the data to ensure correct interpretation of the results.\n\n\n\n\n\nUnderstand the different types of censoring and how to curate your data\nConduct univariate and multivariate survival analysis using R\nGraphically present the findings of a survival analysis\nInterpret the results from a survival analysis\n\n\n\n\nTask\nTime\n\n\n\n\nIntroduction\n3 hours\n\n\nData curation\n2 hours\n\n\nSurvival analysis\n3 hours\n\n\nExtension task: Advanced survival analysis\n2 hours\n\n\n\n\n\n\nLet’s get coding"
  },
  {
    "objectID": "index.html#description-of-the-project",
    "href": "index.html#description-of-the-project",
    "title": "Cracking time’s code: Survival analysis of large datasets",
    "section": "",
    "text": "This is a special type of analysis that takes into consideration when the event occurred rather than if the event occurred. In other words, we are focused on acquiring the rate, which is the number of events per unit time. In this exemplar will introduce you to the concept of survival analysis (also known as a time-to-event analysis) using large data sets using R.\n\nFirstly, I will highlight the steps needed to effectively clean the data, including correct censoring of the participants.\nSecondly, I will demonstrate two approaches: a univariate and a multivariate Cox Proportional regression model (which allows the incorporation of confounders).\nThirdly, we will be able to estimate the hazard ratio of an event occurring between two groups and present our findings in a Kaplan-Meier curve (univariate analysis) or in a table/forest plot (multivariate analysis).\n\nThis special type of analysis allows to calculate the risk of the event (disease, death, etc.) occurring at a given time (hazard ratio). A common timescale used in survival analysis is time-to-event, however in large cohort studies data may be left-truncated (participants entering the study at different time points), making the time-scale unsuitable. Instead, age should be considered as the timescale. This is most relevant when exploring age-dependent associations between exposures and outcomes. Therefore, it ensures accurate estimation of hazard risk and median survival times, preventing underestimation.\n\n\nIn summary, survival analysis using large cohort data may be challenging and require comprehensive understanding of the data to ensure correct interpretation of the results."
  },
  {
    "objectID": "index.html#learning-outcomes",
    "href": "index.html#learning-outcomes",
    "title": "Cracking time’s code: Survival analysis of large datasets",
    "section": "",
    "text": "Understand the different types of censoring and how to curate your data\nConduct univariate and multivariate survival analysis using R\nGraphically present the findings of a survival analysis\nInterpret the results from a survival analysis\n\n\n\n\nTask\nTime\n\n\n\n\nIntroduction\n3 hours\n\n\nData curation\n2 hours\n\n\nSurvival analysis\n3 hours\n\n\nExtension task: Advanced survival analysis\n2 hours\n\n\n\n\n\n\nLet’s get coding"
  }
]